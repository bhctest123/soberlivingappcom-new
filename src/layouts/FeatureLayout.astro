---
import BaseLayout from './BaseLayout.astro';

export interface Props {
  feature: {
    id: string;
    name: string;
    description: string;
    iconPath: string;
    altText: string;
  };
  seo: {
    title: string;
    description: string;
    canonical?: string;
    ogType?: string;
    noindex?: boolean;
    image?: string;
    twitterCard?: string;
    keywords?: string[];
  };
  content?: {
    heroTitle?: string;
    heroDescription?: string;
    keyBenefits?: string[];
    features?: Array<{
      title: string;
      description: string;
      icon?: string;
    }>;
    additionalSections?: Array<{
      title: string;
      content: string;
    }>;
  };
}

const { feature, seo, content } = Astro.props;

// Ensure we have default values
const heroTitle = content?.heroTitle || feature.name;
const heroDescription = content?.heroDescription || feature.description;
const pageTitle = seo.title || `${feature.name} - Sober Living App`;
const pageDescription = seo.description || feature.description;
---

<BaseLayout
  title={pageTitle}
  description={pageDescription}
  canonical={seo.canonical}
  ogType={seo.ogType || "website"}
  noindex={seo.noindex || false}
  image={seo.image}
>
  <!-- Hero Section -->
  <section class="relative bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 py-20 lg:py-28 overflow-hidden">
    <!-- Background decoration -->
    <div class="absolute inset-0 opacity-10">
      <div class="absolute top-0 -left-4 w-72 h-72 bg-purple-300 rounded-full mix-blend-multiply filter blur-xl animate-blob"></div>
      <div class="absolute top-0 -right-4 w-72 h-72 bg-yellow-300 rounded-full mix-blend-multiply filter blur-xl animate-blob animation-delay-2000"></div>
      <div class="absolute -bottom-8 left-20 w-72 h-72 bg-pink-300 rounded-full mix-blend-multiply filter blur-xl animate-blob animation-delay-4000"></div>
    </div>
    
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 relative">
      <div class="text-center">
        <!-- Feature Icon -->
        <div class="flex justify-center mb-10">
          <div class="relative">
            <div class="absolute inset-0 bg-gradient-to-r from-blue-600 to-indigo-600 rounded-3xl blur-2xl opacity-20 animate-pulse"></div>
            <div class="relative w-28 h-28 bg-white rounded-3xl shadow-xl flex items-center justify-center border border-gray-100">
              <img 
                src={feature.iconPath} 
                alt={feature.altText}
                class="w-20 h-20 object-contain"
                loading="eager"
              />
            </div>
          </div>
        </div>
        
        <!-- Hero Title -->
        <h1 class="text-4xl lg:text-6xl font-bold text-gray-900 mb-6 leading-tight">
          <span class="bg-gradient-to-r from-blue-600 to-indigo-600 bg-clip-text text-transparent">
            {heroTitle}
          </span>
        </h1>
        
        <!-- Hero Description -->
        <p class="text-xl lg:text-2xl text-gray-700 max-w-4xl mx-auto mb-10 leading-relaxed">
          {heroDescription}
        </p>
        
        <!-- CTA Buttons -->
        <div class="flex flex-col sm:flex-row gap-4 justify-center">
          <a 
            href="https://behavehealth.com/get-started" 
            class="group inline-flex items-center px-8 py-4 text-lg font-medium rounded-xl text-white bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 transition-all duration-200 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5"
          >
            Get Started
            <img src="/images/icons/long_arrow_right.png" alt="Arrow" class="ml-2 w-5 h-5 group-hover:translate-x-1 transition-transform" />
          </a>
          <a 
            href="/contact" 
            class="group inline-flex items-center px-8 py-4 text-lg font-medium rounded-xl text-gray-700 bg-white hover:bg-gray-50 transition-all duration-200 shadow-md hover:shadow-lg border border-gray-200"
          >
            Learn More
            <img src="/images/icons/chevron_right.png" alt="Arrow" class="ml-2 w-5 h-5 group-hover:translate-x-1 transition-transform" />
          </a>
        </div>
      </div>
    </div>
  </section>

  <!-- Key Benefits Section -->
  {content?.keyBenefits && content.keyBenefits.length > 0 && (
    <section class="py-20 bg-gradient-to-b from-white to-gray-50">
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="text-center mb-16">
          <h2 class="text-4xl lg:text-5xl font-bold text-gray-900 mb-4">
            Key Benefits
          </h2>
          <p class="text-xl text-gray-600 max-w-3xl mx-auto">
            Discover how <span class="font-semibold text-blue-600">{feature.name}</span> can transform your sober living operations
          </p>
        </div>
        
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
          {content.keyBenefits.map((benefit, index) => (
            <div class="group relative bg-white rounded-2xl p-8 shadow-md hover:shadow-xl transition-all duration-300 border border-gray-100 hover:border-blue-200">
              <div class="absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-blue-600 to-indigo-600 rounded-t-2xl opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
              <div class="flex flex-col items-center text-center">
                <div class="w-14 h-14 bg-gradient-to-br from-blue-100 to-indigo-100 rounded-xl flex items-center justify-center mb-6 group-hover:scale-110 transition-transform duration-300">
                  <span class="text-blue-600 font-bold text-xl">{index + 1}</span>
                </div>
                <p class="text-gray-700 leading-relaxed text-lg">{benefit}</p>
              </div>
            </div>
          ))}
        </div>
      </div>
    </section>
  )}

  <!-- Features Detail Section -->
  {content?.features && content.features.length > 0 && (
    <section class="py-20 bg-white">
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="text-center mb-16">
          <h2 class="text-4xl lg:text-5xl font-bold text-gray-900 mb-4">
            Features & Capabilities
          </h2>
          <p class="text-xl text-gray-600 max-w-3xl mx-auto">
            Explore the comprehensive features that make <span class="font-semibold text-blue-600">{feature.name}</span> essential for your operations
          </p>
        </div>
        
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
          {content.features.map((feat) => (
            <div class="group bg-gradient-to-br from-white to-gray-50 rounded-2xl shadow-lg hover:shadow-2xl transition-all duration-300 p-8 border border-gray-100 hover:border-blue-200 relative overflow-hidden">
              <div class="absolute -top-10 -right-10 w-32 h-32 bg-gradient-to-br from-blue-100 to-indigo-100 rounded-full opacity-20 group-hover:scale-150 transition-transform duration-500"></div>
              <div class="relative flex items-start space-x-5">
                {feat.icon && (
                  <div class="w-16 h-16 bg-gradient-to-br from-blue-100 to-indigo-100 rounded-xl flex items-center justify-center flex-shrink-0 group-hover:scale-110 transition-transform duration-300">
                    <img src={feat.icon} alt="" class="w-8 h-8" />
                  </div>
                )}
                <div class="flex-1">
                  <h3 class="text-2xl font-semibold text-gray-900 mb-3 group-hover:text-blue-600 transition-colors duration-300">{feat.title}</h3>
                  <p class="text-gray-600 leading-relaxed text-lg">{feat.description}</p>
                </div>
              </div>
            </div>
          ))}
        </div>
      </div>
    </section>
  )}

  <!-- Additional Content Sections -->
  {content?.additionalSections && content.additionalSections.length > 0 && (
    content.additionalSections.map((section, index) => (
      <section class={`py-20 ${index % 2 === 0 ? 'bg-gradient-to-b from-gray-50 to-white' : 'bg-gradient-to-b from-white to-gray-50'}`}>
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
          <div class="max-w-5xl mx-auto">
            <h2 class="text-4xl lg:text-5xl font-bold text-gray-900 mb-12 text-center">
              <span class="bg-gradient-to-r from-blue-600 to-indigo-600 bg-clip-text text-transparent">
                {section.title}
              </span>
            </h2>
            <div class="prose prose-lg prose-blue mx-auto text-gray-600 max-w-none" set:html={section.content} />
          </div>
        </div>
      </section>
    ))
  )}

  <!-- Slot for additional custom content -->
  <slot />

  <!-- Call to Action Section -->
  <section class="relative py-24 overflow-hidden">
    <div class="absolute inset-0 bg-gradient-to-br from-blue-600 via-indigo-600 to-purple-600"></div>
    <div class="absolute inset-0 bg-black opacity-10"></div>
    
    <!-- Background pattern -->
    <div class="absolute inset-0 opacity-10">
      <div class="absolute -top-10 -right-10 w-96 h-96 bg-white rounded-full mix-blend-soft-light animate-pulse"></div>
      <div class="absolute -bottom-10 -left-10 w-96 h-96 bg-white rounded-full mix-blend-soft-light animate-pulse animation-delay-2000"></div>
    </div>
    
    <div class="relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
      <h2 class="text-4xl lg:text-5xl font-bold text-white mb-6">
        Ready to streamline your <span class="text-yellow-300">{feature.name.toLowerCase()}</span>?
      </h2>
      <p class="text-xl lg:text-2xl text-blue-100 max-w-3xl mx-auto mb-12">
        Join hundreds of sober living operators who trust Sober Living App to manage their operations efficiently.
      </p>
      <div class="flex flex-col sm:flex-row gap-6 justify-center">
        <a 
          href="https://behavehealth.com/get-started" 
          class="group inline-flex items-center px-10 py-5 text-lg font-semibold rounded-xl text-blue-600 bg-white hover:bg-gray-50 transition-all duration-200 shadow-xl hover:shadow-2xl transform hover:-translate-y-1"
        >
          Start Free Trial
          <img src="/images/icons/long_arrow_right.png" alt="Arrow" class="ml-3 w-6 h-6 group-hover:translate-x-1 transition-transform" />
        </a>
        <a 
          href="/contact" 
          class="group inline-flex items-center px-10 py-5 text-lg font-semibold rounded-xl text-white border-2 border-white hover:bg-white hover:text-blue-600 transition-all duration-200 shadow-xl hover:shadow-2xl transform hover:-translate-y-1"
        >
          Schedule Demo
          <img src="/images/icons/ic_schedule.png" alt="Calendar" class="ml-3 w-6 h-6 group-hover:translate-x-1 transition-transform" />
        </a>
      </div>
    </div>
  </section>
</BaseLayout>

<style>
  .prose img {
    @apply rounded-lg shadow-md;
  }
  
  .prose h2 {
    @apply text-gray-900 font-bold text-3xl mb-6;
  }
  
  .prose h3 {
    @apply text-gray-900 font-semibold text-2xl mb-4;
  }
  
  .prose p {
    @apply text-gray-600 leading-relaxed text-lg mb-6;
  }
  
  .prose ul {
    @apply space-y-3 mb-6;
  }
  
  .prose ul li {
    @apply text-gray-600 text-lg;
  }
  
  .prose ul li::marker {
    @apply text-blue-600;
  }
  
  .prose strong {
    @apply text-gray-900 font-semibold;
  }
  
  /* Animations */
  @keyframes blob {
    0% {
      transform: translate(0px, 0px) scale(1);
    }
    33% {
      transform: translate(30px, -50px) scale(1.1);
    }
    66% {
      transform: translate(-20px, 20px) scale(0.9);
    }
    100% {
      transform: translate(0px, 0px) scale(1);
    }
  }
  
  .animate-blob {
    animation: blob 7s infinite;
  }
  
  .animation-delay-2000 {
    animation-delay: 2s;
  }
  
  .animation-delay-4000 {
    animation-delay: 4s;
  }
</style>